<%= form_for @user, url: user_profile_path(@user) do |f| %>
  <div>
    <div class=" col-sm-12" style="padding-top :5px">
      <div class="col-sm-3" style="padding-left :0px; padding-right 25px">
        <div id="image_container">
          <%= image_tag(@user.avatar_url(:thumb), :class => 'img-responsive img-rounded position') if @user.avatar?%>
          <%= render 'profile_photo'%>
        </div>
      </div>
      <div class="col-sm-4">
          <div class="form-control-wrapper" >
            <%= f.text_field :name, :class => 'form-control empty'%>
            <div class="floating-label">Name</div>
            <span class="material-input"></span>
          </div>
          <p>
          <div class="form-control-wrapper" >
            <%= f.text_field :city, :class => 'form-control empty'%>
            <div class="floating-label">City</div>
            <span class="material-input"></span>
          </div>
          <div class="form-control-wrapper" >
            <%= f.text_field :country, :class => 'form-control empty'%>
            <div class="floating-label">Country</div>
            <span class="material-input"></span>
          </div></p>

          <div class="form-control-wrapper" >
            <%= f.text_field :phone, :class => 'form-control empty'%>
            <div class="floating-label">Phone</div>
            <span class="material-input"></span>
          </div>
          <div class="form-control-wrapper" >
            <%= f.text_field :email, :class => 'form-control empty'%>
            <div class="floating-label">Email</div>
            <span class="material-input"></span>
          </div>

            <div class="col-sm-1 pad">
              <i class="fa fa-graduation-cap"></i>
            </div>
            <div class="col-sm-9 pad">
              <% @user.graduations.each do |x|%>
               <%= x.batch.month%> / <%= x.batch.year%>,
               <%end%>

               <% @user.graduations.each do |x|%>
                <%= x.programme.name%>,
                <%end%>

                <% @user.graduations.each do |x|%>
                <%= x.faculty.name%>,
                <%end%>

                <% @user.graduations.each do |x|%>
                <%= x.campu.name%>.
                <%end%>
            </div>
        </div>

        <div class="col-sm-4">
            <%= image_tag "http://maps.google.com/maps/api/staticmap?size=400x150 &maptype=roadmap&zoom=14&markers=#{@user.city}%2C#{@user.country}" %>
            <%= @user.city %>,  <%= @user.country %>.<br>
        </div>
    </div>

    <div class="col-sm-12">
      <div class="row pad">
        <div class="col-sm-2 pad">
          <div class="form-control-wrapper" >
            <%= f.text_field :facebook, :class => 'form-control empty'%>
            <div class="floating-label">Facebook</div>
            <span class="material-input"></span>
          </div>
        </div>
        <div class="col-sm-2 pad">
          <div class="form-control-wrapper" >
            <%= f.text_field :linkedin, :class => 'form-control empty'%>
            <div class="floating-label">LinkedIn</div>
            <span class="material-input"></span>
          </div>
        </div>
        <div class="col-sm-2 pad">
          <div class="form-control-wrapper" >
            <%= f.text_field :twitter, :class => 'form-control empty'%>
            <div class="floating-label">Twitter</div>
            <span class="material-input"></span>
          </div>
        </div>
        <div class="col-sm-2 pad">
          <div class="form-control-wrapper" >
            <%= f.text_field :instagram, :class => 'form-control empty'%>
            <div class="floating-label">Instagram</div>
            <span class="material-input"></span>
          </div>
        </div>
    </div>

    <div class="col-sm-12 pad">
      <div class="row pad">
              <% @jobs.each do |job|%>
                <% if job.user_id == current_user.id %>
                  <% if job.current == "1"%>
                  <div class="col-sm-4">
                    <p>
                      <b><%= job.title %></b>[current]</p>
                      <p>  <%= job.company %> <%= job.city %>
                        <%= job.country %>
                      <p>
                       <% if !job.from.nil? && !job.to.nil? %>
                           From <%= job.from.strftime("%B %Y") %>
                       <% end %>
                     </p>
                  </div>
                  <%= link_to   new_job_path, :class => 'btn btn-primary btn-sm' do %><span class="fa fa-plus-square">Add Job</span> <% end %>

                  <div class="col-sm-1 pad">
                    <p>
                      <%= link_to edit_job_path(job), :class => 'btn btn-primary btn-sm' do %><span class="glyphicon glyphicon-edit"></span> <% end %>
                    </p>

                  </div>
                  <div class="col-sm-1 pad">
                    <p>
                      <%= link_to job, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'btn btn-primary btn-sm' do %> <span class="glyphicon glyphicon-remove"></span><% end %>
                    </p>
                  </div>
                <% else %>
                <div class="col-sm-4 pad">
                  <p>
                    <b><%= job.title %></b></p>
                    <p>  <%= job.company %> <%= job.city %>
                    <%= job.country %>
                    <p>
                     <% if !job.from.nil? && !job.to.nil? %>
                         From <%= job.from.strftime("%B %Y") %> to <%= job.to.strftime("%B %Y")  %>
                     <% end %>
                   </p>
                </div>

                <div class="col-sm-1 pad">
                  <p>
                    <%= link_to edit_job_path(job), :class => 'btn btn-primary btn-sm' do %><span class="glyphicon glyphicon-edit"></span> <% end %>
                  </p>
                </div>
                <div class="col-sm-1 pad">
                  <p>
                    <%= link_to job, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'btn btn-primary btn-sm' do %> <span class="glyphicon glyphicon-remove"></span><% end %>
                  </p>
                </div>
                <% end %>
              <% end %>
            <% end %>
          </div>
          <div class="row pad">
              <div class="col-sm-3 pad">
                Location privacy:<br>
                <%= f.select :location_privacy_option, [""]+User::PRIVACY_OPTIONS.first(User::PRIVACY_OPTIONS.size()), :class => 'control'%>
              </div>
              <div class="col-sm-3 pad">
                Social privacy: <br>
                <%= f.select :social_privacy_option, [""]+User::PRIVACY_OPTIONS.first(User::PRIVACY_OPTIONS.size()), :class => 'control'%>
              </div>
              <div class="col-sm-3 pad">
                Contact privacy: <br>
                <%= f.select :contact_privacy_option, [""]+User::PRIVACY_OPTIONS.first(User::PRIVACY_OPTIONS.size()), :class => 'control'%>
              </div>
              <div class="col-sm-3 pad">
                Job privacy: <br>
                <%= f.select :job_privacy_option, [""]+User::PRIVACY_OPTIONS.first(User::PRIVACY_OPTIONS.size()), :class => 'control'%>
              </div>
          </div>
        </div>
    </div>
    <div class="col-sm-12">
      <div class="row">
        <div class="col-sm-4"></div>
        <div class="col-sm-2">
          <%= link_to 'Back', user_profiles_path, :class => 'btn btn-primary btn-sm' %>
          <%= f.submit "Update", :action => "update", :class => 'btn btn-primary btn-sm'%>
        </div>
      </div>
    </div>
  </div>
<% end %>
<style>
   span{color:white}
   .position{position:relative;}
   #image_container{width:300px; height:auto }
   .pad{padding: 0px}
   .pad-left{padding-left :15px}
   .pad-bottom{padding-bottom: 0px;}
</style>

<script type="text/javascript">
  $(document).ready(function () {
    $(this).find("#btn").hide();
    $(document).on('mouseenter', '#image_container', function () {
        $(this).find("#btn").show();
    }).on('mouseleave', '#image_container', function () {
        $(this).find("#btn").hide();
    });
  });
</script>
